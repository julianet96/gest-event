"use strict";(globalThis["webpackChunkgest_event"]=globalThis["webpackChunkgest_event"]||[]).push([[314],{314:(e,l,a)=>{a.r(l),a.d(l,{default:()=>G});var o=a(1758),t=a(8790);const r={class:"q-pa-md"},n={class:"row items-center justify-end"},s={class:"row items-center justify-end"},u={class:"row items-center justify-end"},i={class:"row items-center justify-end"},d={class:"row items-center justify-end"},m={class:"row items-center justify-end"};function c(e,l,a,c,v,p){const b=(0,o.g2)("q-input"),f=(0,o.g2)("q-btn"),g=(0,o.g2)("q-date"),k=(0,o.g2)("q-popup-proxy"),h=(0,o.g2)("q-icon"),V=(0,o.g2)("q-time"),F=(0,o.g2)("q-step"),y=(0,o.g2)("q-select"),R=(0,o.g2)("q-td"),T=(0,o.g2)("q-tr"),_=(0,o.g2)("q-table"),w=(0,o.g2)("q-stepper-navigation"),C=(0,o.g2)("q-stepper"),U=(0,o.g2)("q-avatar"),E=(0,o.g2)("q-card-section"),q=(0,o.g2)("q-card-actions"),A=(0,o.g2)("q-card"),K=(0,o.g2)("q-dialog"),L=(0,o.g2)("q-page"),Q=(0,o.gN)("close-popup");return(0,o.uX)(),(0,o.Wv)(L,null,{default:(0,o.k6)((()=>[l[30]||(l[30]=(0,o.Lk)("div",{class:"text-h5 bg-secondary titelEvent q-mb-xs"},"Nuevo Evento",-1)),(0,o.Lk)("div",r,[(0,o.bF)(C,{modelValue:e.step,"onUpdate:modelValue":l[22]||(l[22]=l=>e.step=l),ref:"stepper",contracted:"",color:"secondary",animated:""},{navigation:(0,o.k6)((()=>[(0,o.bF)(w,null,{default:(0,o.k6)((()=>[e.step<3?((0,o.uX)(),(0,o.Wv)(f,{key:0,onClick:l[19]||(l[19]=l=>e.testing(e.step)),color:"primary",label:"Continuar"})):(0,o.Q3)("",!0),3===e.step?((0,o.uX)(),(0,o.Wv)(f,{key:1,onClick:l[20]||(l[20]=l=>e.saveModal=!0),color:"primary",label:"Guardar"})):(0,o.Q3)("",!0),e.step>1?((0,o.uX)(),(0,o.Wv)(f,{key:2,flat:"",color:"primary",onClick:l[21]||(l[21]=l=>e.$refs.stepper.previous()),label:"Volver",class:"q-ml-sm"})):(0,o.Q3)("",!0)])),_:1})])),default:(0,o.k6)((()=>[(0,o.bF)(F,{name:1,title:"Información del evento",icon:"settings",done:e.step>1},{default:(0,o.k6)((()=>[(0,o.bF)(b,{ref:"eventNameRef",color:"grey-8","bg-color":"grey-4",class:"q-mb-md",rounded:"",outlined:"",modelValue:e.eventName,"onUpdate:modelValue":l[0]||(l[0]=l=>e.eventName=l),label:"Nombre del Evento",rules:[e=>!!e]},null,8,["modelValue","rules"]),(0,o.bF)(b,{ref:"eventDateRef",color:"grey-8","bg-color":"grey-4",modelValue:e.eventDate,"onUpdate:modelValue":l[2]||(l[2]=l=>e.eventDate=l),rounded:"",outlined:"",mask:"date",rules:["date"],label:"Día del Evento"},{append:(0,o.k6)((()=>[(0,o.bF)(h,{name:"event",class:"cursor-pointer"},{default:(0,o.k6)((()=>[(0,o.bF)(k,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.k6)((()=>[(0,o.bF)(g,{modelValue:e.eventDate,"onUpdate:modelValue":l[1]||(l[1]=l=>e.eventDate=l),options:e.optionsDate},{default:(0,o.k6)((()=>[(0,o.Lk)("div",n,[(0,o.bo)((0,o.bF)(f,{label:"Close",color:"primary",flat:""},null,512),[[Q]])])])),_:1},8,["modelValue","options"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.bF)(b,{ref:"eventTimeRef",color:"grey-8","bg-color":"grey-4",rounded:"",outlined:"",modelValue:e.eventTime,"onUpdate:modelValue":l[4]||(l[4]=l=>e.eventTime=l),mask:"time",rules:["time"],label:"Hora Inicio del Evento"},{append:(0,o.k6)((()=>[(0,o.bF)(h,{name:"access_time",class:"cursor-pointer"},{default:(0,o.k6)((()=>[(0,o.bF)(k,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{modelValue:e.eventTime,"onUpdate:modelValue":l[3]||(l[3]=l=>e.eventTime=l),format24h:""},{default:(0,o.k6)((()=>[(0,o.Lk)("div",s,[(0,o.bo)((0,o.bF)(f,{label:"Close",color:"primary",flat:""},null,512),[[Q]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.bF)(b,{ref:"eventEndTimeRef",color:"grey-8","bg-color":"grey-4",rounded:"",outlined:"",modelValue:e.eventEndTime,"onUpdate:modelValue":l[6]||(l[6]=l=>e.eventEndTime=l),mask:"time",rules:["time"],label:"Hora Fin del Evento"},{append:(0,o.k6)((()=>[(0,o.bF)(h,{name:"access_time",class:"cursor-pointer"},{default:(0,o.k6)((()=>[(0,o.bF)(k,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{modelValue:e.eventEndTime,"onUpdate:modelValue":l[5]||(l[5]=l=>e.eventEndTime=l),format24h:""},{default:(0,o.k6)((()=>[(0,o.Lk)("div",u,[(0,o.bo)((0,o.bF)(f,{label:"Close",color:"primary",flat:""},null,512),[[Q]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.bF)(b,{ref:"warehouseTimeRef",color:"grey-8","bg-color":"grey-4",rounded:"",outlined:"",modelValue:e.warehouseTime,"onUpdate:modelValue":l[8]||(l[8]=l=>e.warehouseTime=l),mask:"time",rules:["time"],label:"Hora En Almacén"},{append:(0,o.k6)((()=>[(0,o.bF)(h,{name:"access_time",class:"cursor-pointer"},{default:(0,o.k6)((()=>[(0,o.bF)(k,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{modelValue:e.warehouseTime,"onUpdate:modelValue":l[7]||(l[7]=l=>e.warehouseTime=l),format24h:""},{default:(0,o.k6)((()=>[(0,o.Lk)("div",i,[(0,o.bo)((0,o.bF)(f,{label:"Close",color:"primary",flat:""},null,512),[[Q]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["done"]),(0,o.bF)(F,{name:2,title:"Configuracion",icon:"map",done:e.step>2},{default:(0,o.k6)((()=>[(0,o.bF)(b,{ref:"eventLocationRef",color:"grey-8","bg-color":"grey-4",class:"q-mb-md",rounded:"",outlined:"",modelValue:e.eventLocation,"onUpdate:modelValue":l[9]||(l[9]=l=>e.eventLocation=l),label:"Ubicación del Evento",rules:[e=>!!e]},null,8,["modelValue","rules"]),(0,o.bF)(b,{color:"grey-8","bg-color":"grey-4",class:"q-mb-md",rounded:"",outlined:"",modelValue:e.eventUrlLocation,"onUpdate:modelValue":l[10]||(l[10]=l=>e.eventUrlLocation=l),label:"URL Google Maps"},null,8,["modelValue"]),(0,o.bF)(y,{ref:"eventCarRef",color:"grey-8","bg-color":"grey-4",rounded:"",outlined:"",modelValue:e.eventCar,"onUpdate:modelValue":l[11]||(l[11]=l=>e.eventCar=l),options:e.cars,"option-value":"id","option-label":"name","emit-value":"","map-options":"",label:"Vehículo",class:"q-mb-md",rules:[e=>!!e]},null,8,["modelValue","options","rules"]),(0,o.bF)(y,{ref:"eventUsersRef",color:"grey-8","bg-color":"grey-4",rounded:"",outlined:"",multiple:"",modelValue:e.eventUsers,"onUpdate:modelValue":l[12]||(l[12]=l=>e.eventUsers=l),options:e.users,"option-value":"id","option-label":"name","emit-value":"","map-options":"",label:"Tecnicos",rules:[e=>!!e]},null,8,["modelValue","options","rules"])])),_:1},8,["done"]),(0,o.bF)(F,{name:3,title:"Horario de evento",icon:"hourglass_empty",done:e.step>3},{default:(0,o.k6)((()=>[(0,o.bF)(b,{ref:"groupNameRef",color:"grey-8","bg-color":"grey-4",class:"q-mb-md",rounded:"",outlined:"",modelValue:e.groupName,"onUpdate:modelValue":l[13]||(l[13]=l=>e.groupName=l),label:"Nombre del Grupo",rules:[e=>!!e]},null,8,["modelValue","rules"]),(0,o.bF)(b,{ref:"timeTestRef",color:"grey-8","bg-color":"grey-4",rounded:"",outlined:"",modelValue:e.timeTest,"onUpdate:modelValue":l[15]||(l[15]=l=>e.timeTest=l),mask:"time",rules:["time"],label:"Hora Pruebas Grupo"},{append:(0,o.k6)((()=>[(0,o.bF)(h,{name:"access_time",class:"cursor-pointer"},{default:(0,o.k6)((()=>[(0,o.bF)(k,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{modelValue:e.timeTest,"onUpdate:modelValue":l[14]||(l[14]=l=>e.timeTest=l),format24h:""},{default:(0,o.k6)((()=>[(0,o.Lk)("div",d,[(0,o.bo)((0,o.bF)(f,{label:"Close",color:"primary",flat:""},null,512),[[Q]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.bF)(b,{ref:"performanceTimeRef",color:"grey-8","bg-color":"grey-4",rounded:"",outlined:"",modelValue:e.performanceTime,"onUpdate:modelValue":l[17]||(l[17]=l=>e.performanceTime=l),mask:"time",rules:["time"],label:"Hora Actuacion"},{append:(0,o.k6)((()=>[(0,o.bF)(h,{name:"access_time",class:"cursor-pointer"},{default:(0,o.k6)((()=>[(0,o.bF)(k,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{modelValue:e.performanceTime,"onUpdate:modelValue":l[16]||(l[16]=l=>e.performanceTime=l),format24h:""},{default:(0,o.k6)((()=>[(0,o.Lk)("div",m,[(0,o.bo)((0,o.bF)(f,{label:"Close",color:"primary",flat:""},null,512),[[Q]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.bF)(f,{color:"secondary",class:"q-mb-md full-width",glossy:"",unelevated:"",icon:"add",label:"Añadir horario",onClick:l[18]||(l[18]=l=>e.addGroupEvent())}),(0,o.bF)(_,{title:"Horarios",rows:e.eventSchedule,columns:e.scheduleColumns,"row-key":"name",color:"primary","card-class":"bg-secondary text-white","table-class":"bg-grey-5 text-black","table-header-class":"bg-secondary text-white","rows-per-page-options":[0],"hide-bottom":"",class:"tableNew"},{body:(0,o.k6)((l=>[(0,o.bF)(T,{props:l},{default:(0,o.k6)((()=>[(0,o.bF)(R,{key:"name",props:l},{default:(0,o.k6)((()=>[(0,o.eW)((0,t.v_)(l.row.groupName),1)])),_:2},1032,["props"]),(0,o.bF)(R,{key:"tests",props:l},{default:(0,o.k6)((()=>[(0,o.eW)((0,t.v_)(l.row.timeTest),1)])),_:2},1032,["props"]),(0,o.bF)(R,{key:"performance",props:l},{default:(0,o.k6)((()=>[(0,o.eW)((0,t.v_)(l.row.performanceTime),1)])),_:2},1032,["props"]),(0,o.bF)(R,{key:"options",props:l},{default:(0,o.k6)((()=>[(0,o.bF)(f,{round:"",class:"glossy",color:"red",size:"xs",icon:"delete",onClick:a=>e.deleteRow(l)},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])),_:1},8,["done"])])),_:1},8,["modelValue"]),(0,o.bF)(K,{modelValue:e.saveModal,"onUpdate:modelValue":l[25]||(l[25]=l=>e.saveModal=l),persistent:""},{default:(0,o.k6)((()=>[(0,o.bF)(A,null,{default:(0,o.k6)((()=>[(0,o.bF)(E,{class:"row items-center"},{default:(0,o.k6)((()=>[(0,o.bF)(U,{icon:"warning",color:"primary","text-color":"white"}),l[27]||(l[27]=(0,o.Lk)("span",{class:"q-ml-sm q-mb-md"},"Como quieres crear el evento.",-1)),l[28]||(l[28]=(0,o.Lk)("span",{class:"q-ml-sm"},"Si lo guardas como confirmado deberas rellenar la hoja de carga.",-1))])),_:1}),(0,o.bF)(q,{align:"right"},{default:(0,o.k6)((()=>[(0,o.bo)((0,o.bF)(f,{flat:"",label:"Borrador",color:"primary",onClick:l[23]||(l[23]=l=>e.saveEvent(0))},null,512),[[Q]]),(0,o.bo)((0,o.bF)(f,{flat:"",label:"Confirmado",color:"primary",onClick:l[24]||(l[24]=l=>e.saveEvent(1))},null,512),[[Q]]),(0,o.bo)((0,o.bF)(f,{flat:"",label:"Cancelar",color:"red"},null,512),[[Q]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.bF)(K,{modelValue:e.generateSheet,"onUpdate:modelValue":l[26]||(l[26]=l=>e.generateSheet=l),persistent:""},{default:(0,o.k6)((()=>[(0,o.bF)(A,null,{default:(0,o.k6)((()=>[(0,o.bF)(E,{class:"row items-center"},{default:(0,o.k6)((()=>[(0,o.bF)(U,{icon:"question_mark",color:"primary","text-color":"white"}),l[29]||(l[29]=(0,o.Lk)("span",{class:"q-ml-sm"},"Quieres crear hoja de carga ?.",-1))])),_:1}),(0,o.bF)(q,{align:"right"},{default:(0,o.k6)((()=>[(0,o.bo)((0,o.bF)(f,{flat:"",label:"Crear",color:"primary",onClick:e.goToCreateSheet},null,8,["onClick"]),[[Q]]),(0,o.bo)((0,o.bF)(f,{flat:"",label:"Cancelar",color:"red",onClick:e.goToList},null,8,["onClick"]),[[Q]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})}a(239);var v=a(8734),p=a(455),b=(a(1597),a(4907)),f=a(660),g=a(53);const k=(0,o.pM)({name:"EventDay",setup(){const e=(0,v.KR)(null),l=(0,v.KR)(null),a=(0,v.KR)(null),t=(0,v.KR)(null),r=(0,v.KR)(null),n=(0,v.KR)(null),s=(0,v.KR)(null),u=(0,v.KR)(null),i=(0,v.KR)(null),d=(0,v.KR)(null),m=(0,v.KR)(null),c=(0,v.KR)(),k=(0,p.rd)(),h=((0,p.lq)(),(0,b.A)(),(0,v.KR)()),V=(0,v.KR)(!1),F=(0,v.KR)(!1),y=(0,v.KR)(1),R=(0,v.KR)(),T=(0,v.KR)(),_=(0,v.KR)(),w=(0,v.KR)(),C=(0,v.KR)(),U=(0,v.KR)([]),E=(0,v.KR)(),q=(0,v.KR)(),A=(0,v.KR)(),K=(0,v.KR)(),L=(0,v.KR)(),Q=(0,v.KR)(),D=(0,v.KR)(),N=[{name:"name",align:"center",label:"Nombre",field:"name"},{name:"tests",align:"center",label:"Pruebas",field:"timeTest",sortable:!0},{name:"performance",align:"center",label:"Actuación",field:"performanceTime",sortable:!0},{name:"options",align:"center"}],x=(0,v.KR)([]);function S(e){function l(e){return e<10?"0"+e:e}var a=new Date(e);return[a.getFullYear(),l(a.getMonth()+1),l(a.getDate())].join("/")}function j(){f.axios.get(g.A.RestUrl+"Cars/allCars").then((e=>{U.value=e.data})).catch((e=>{console.log(e)}))}function M(){f.axios.get(g.A.RestUrl+"Users/allUsers").then((e=>{h.value=e.data})).catch((e=>{console.log(e)}))}function H(){i.value.validate(),d.value.validate(),m.value.validate(),d.value.hasError||m.value.hasError||i.value.hasError||(x.value.push({groupName:L.value,timeTest:Q.value,performanceTime:D.value}),L.value="",Q.value="",D.value="",setTimeout((()=>{i.value.resetValidation(),d.value.resetValidation(),m.value.resetValidation()}),10),i.value.resetValidation(),m.value.resetValidation(),d.value.resetValidation())}function W(e){var l=x.value.indexOf(e.row);x.value.splice(l,1)}function G(e){function l(e){return e<10?"0"+e:e}var a=new Date(e);return[a.getFullYear(),l(a.getMonth()+1),l(a.getDate())].join("-")}function P(e){var l=G(Date.parse(T.value)),a={eventName:R.value,eventDate:l,eventTime:_.value,eventEndTime:w.value,warehouseTime:C.value,eventCar:E.value,eventLocation:A.value,eventUrlLocation:K.value,eventUsers:q.value,eventSchedule:x.value,eventConfirmed:1==e};f.axios.post(g.A.RestUrl+"Event/addEvent",a).then((l=>{c.value=l.data.hashEvent,1==e?X():F.value=!0})).catch((e=>{}))}function I(o){var i=!1;switch(o){case 1:e.value.validate(),l.value.validate(),a.value.validate(),t.value.validate(),r.value.validate(),e.value.hasError||l.value.hasError||a.value.hasError||t.value.hasError||r.value.hasError||(i=!0);break;case 2:u.value.validate(),n.value.validate(),s.value.validate(),u.value.hasError||n.value.hasError||s.value.hasError||(i=!0);break}i&&this.$refs.stepper.next()}function X(){k.push("")}function B(){k.push("events")}return(0,o.sV)((()=>{j(),M()})),{eventCarRef:n,eventUsersRef:s,eventLocationRef:u,eventNameRef:e,eventDateRef:l,eventTimeRef:a,eventEndTimeRef:t,warehouseTimeRef:r,groupNameRef:i,timeTestRef:d,performanceTimeRef:m,step:y,cars:U,users:h,saveModal:V,generateSheet:F,eventName:R,eventDate:T,eventTime:_,eventEndTime:w,warehouseTime:C,eventCar:E,eventUsers:q,eventLocation:A,eventUrlLocation:K,groupName:L,timeTest:Q,performanceTime:D,scheduleColumns:N,eventSchedule:x,optionsDate(e){var l=Date.now();return e>=S(l)},addGroupEvent:H,deleteRow:W,saveEvent:P,testing:I,goToList:B,goToCreateSheet:X}}});var h=a(2807),V=a(7716),F=a(7222),y=a(8577),R=a(9270),T=a(492),_=a(8975),w=a(3692),C=a(1693),U=a(4917),E=a(5848),q=a(8631),A=a(4488),K=a(5262),L=a(4776),Q=a(558),D=a(3316),N=a(4189),x=a(3952),S=a(2669),j=a(8672),M=a(8582),H=a.n(M);const W=(0,h.A)(k,[["render",c]]),G=W;H()(k,"components",{QPage:V.A,QStepper:F.A,QStep:y.A,QInput:R.A,QIcon:T.A,QPopupProxy:_.A,QDate:w.A,QBtn:C.A,QTime:U.A,QSelect:E.A,QTable:q.A,QTr:A.A,QTd:K.A,QStepperNavigation:L.A,QDialog:Q.A,QCard:D.A,QCardSection:N.A,QAvatar:x.A,QCardActions:S.A}),H()(k,"directives",{ClosePopup:j.A})}}]);