"use strict";(globalThis["webpackChunkgest_event"]=globalThis["webpackChunkgest_event"]||[]).push([[176],{8176:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Q});var a=o(1758),n=o(8790);const l={class:"flex flex-center full-width"},d={style:{width:"97%"}},s={class:"calendarButtons"},i={class:"text-h6 text-weight-bolder"},c={class:"title q-calendar__ellipsis"},r={class:"full-width q-mt-sm"},g={class:"full-width"},h={class:"full-width"};function v(e,t,o,v,k,u){const m=(0,a.g2)("q-banner"),p=(0,a.g2)("q-btn"),C=(0,a.g2)("q-tooltip"),w=(0,a.g2)("q-calendar-month"),D=(0,a.g2)("q-chip"),b=(0,a.g2)("q-space"),f=(0,a.g2)("q-card-section"),y=(0,a.g2)("q-card"),x=(0,a.g2)("q-dialog"),_=(0,a.g2)("q-page"),E=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(_,{class:"flex"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{class:(0,n.C4)(["text-white q-mb-md full-width",e.nextEvent.class])},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.nextEvent.text),1)])),_:1},8,["class"]),(0,a.Lk)("div",l,[(0,a.Lk)("div",d,[(0,a.Lk)("div",s,[(0,a.bF)(p,{round:"","text-color":"accent",class:"calendarButonColor",icon:"arrow_back_ios",onClick:e.onPrev},null,8,["onClick"]),t[2]||(t[2]=(0,a.eW)()),(0,a.Lk)("div",i,(0,n.v_)(e.monthSelected)+" "+(0,n.v_)(e.yearSelected),1),t[3]||(t[3]=(0,a.eW)()),(0,a.bF)(p,{round:"","text-color":"accent",class:"calendarButonColor",icon:"arrow_forward_ios",onClick:e.onNext},null,8,["onClick"])]),(0,a.bF)(w,{ref:"calendar",modelValue:e.selectedDate,"onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedDate=t),animated:"",bordered:"",focusable:"",hoverable:"","no-active-date":"",locale:"es",weekdays:[1,2,3,4,5,6,0],"day-min-height":60,"day-height":0,onChange:e.onChange,onMoved:e.onMoved,onClickDate:e.onClickDate,onClickDay:e.onClickDay,onClickWorkweek:e.onClickWorkweek,onClickHeadWorkweek:e.onClickHeadWorkweek,onClickHeadDay:e.onClickHeadDay},{day:(0,a.k6)((({scope:{timestamp:t}})=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.eventsMap[t.date],(t=>((0,a.uX)(),(0,a.CE)("div",{key:t.id,class:(0,n.C4)([e.badgeClasses(t,"day"),"my-event"])},[(0,a.Lk)("div",c,[(0,a.eW)((0,n.v_)(t.title+(t.time?" - "+t.time:""))+" ",1),(0,a.bF)(C,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(t.details),1)])),_:2},1024)])],2)))),128))])),_:1},8,["modelValue","onChange","onMoved","onClickDate","onClickDay","onClickWorkweek","onClickHeadWorkweek","onClickHeadDay"]),(0,a.Lk)("div",r,[(0,a.bF)(D,{color:"green",style:{"min-width":"220px"},"text-color":"white",label:"Evento Confirmado"})]),(0,a.Lk)("div",g,[(0,a.bF)(D,{color:"orange",style:{"min-width":"220px"},"text-color":"white",label:"Evento Pendiente Confirmación"})]),(0,a.Lk)("div",h,[(0,a.bF)(D,{color:"grey",style:{"min-width":"220px"},"text-color":"white",label:"Vacaciones Confirmadas"})])])]),(0,a.bF)(x,{modelValue:e.dialog,"onUpdate:modelValue":t[1]||(t[1]=t=>e.dialog=t)},{default:(0,a.k6)((()=>[(0,a.bF)(y,null,{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"row items-center q-pb-none"},{default:(0,a.k6)((()=>[t[4]||(t[4]=(0,a.Lk)("div",{class:"text-h6"},"No Evento",-1)),(0,a.bF)(b),(0,a.bo)((0,a.bF)(p,{icon:"close",flat:"",round:"",dense:""},null,512),[[E]])])),_:1}),(0,a.bF)(f,null,{default:(0,a.k6)((()=>t[5]||(t[5]=[(0,a.eW)(" El día seleccionado no hay ningun evento para ti. ")]))),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}o(239);var k=o(8884),u=o(455),m=o(660),p=o(53),C=o(4907);const w=new Date;function D(e){const t=new Date(e);console.log("getCurrentDay:",w,t);const o=(0,k._U)(t);return o.date}const b=(0,a.pM)({name:"MonthSlotDay",data(){return{selectedDate:(0,k.Ec)(),monthSelected:"",yearSelected:"",dialog:!1,router:(0,u.rd)(),nextEvent:{},events:[],$q:(0,C.A)()}},computed:{eventsMap(){const e={};this.events.length>0&&this.events.forEach((t=>{if((e[t.date]=e[t.date]||[]).push(t),void 0!==t.days){let o=(0,k.EH)(t.date),a=t.days;do{o=(0,k.Xd)(o,{day:1}),e[o.date]||(e[o.date]=[]),e[o.date].push(t)}while(--a>1)}})),console.log(e);var t=new Date(this.selectedDate);return this.monthSelected=t.toLocaleString("default",{month:"long"}),this.yearSelected=t.getFullYear(),e}},mounted(){console.log("mounteeeeddd"),this.nextEvent={class:"bg-primary",text:"No tienes ningun evento asignado proximamente"};var e=p.A.RestUrl,t=this.$q.localStorage.getItem("User");m.axios.get(e+"Event/AllEventByUserId",{params:{userId:t.id}}).then((e=>{console.log(e),e.data.forEach((e=>{var t={id:e.id,title:e.eventName,details:e.eventDescription,date:D(e.eventDay),bgcolor:1==e.eventConfirmed?"green":"orange"};this.events.push(t)}));var t=(0,k._U)(new Date(w)),o=this.events.sort(((e,t)=>new Date(e.date)-new Date(t.date))),a=o.filter((e=>new Date(e.date)>=new Date(t.date)));if(a.length>0){var n=a[0];console.log("firstEvent",n),console.log(new Date(n.date).getTime(),new Date(t.date).getTime()),this.nextEvent={class:new Date(n.date).getTime()==new Date(t.date).getTime()?"bg-red":"bg-orange",text:new Date(n.date).getTime()==new Date(t.date).getTime()?"Tienes un evento hoy":"Tu proximo evento es el "+n.date}}console.log("AllItems",a)})).catch((e=>{console.log(e)}))},methods:{badgeClasses(e,t){return{[`text-white bg-${e.bgcolor}`]:!0,"rounded-border":!0}},onToday(){this.$refs.calendar.moveToToday()},onPrev(){this.$refs.calendar.prev(),console.log(this.selectedDate)},onNext(){this.$refs.calendar.next(),console.log(this.selectedDate)},onMoved(e){console.log("onMoved",e);var t=new Date(e.date);this.monthSelected=t.toLocaleString("default",{month:"long"}),this.yearSelected=t.getFullYear()},onChange(e){console.log("onChange",e)},onClickDate(e){var t=this.events.find((t=>t.date==e.scope.timestamp.date));void 0==t?this.dialog=!0:this.router.push({path:"eventDay/"+e.scope.timestamp.date})},onClickDay(e){var t=this.events.find((t=>t.date==e.scope.timestamp.date));void 0==t?this.dialog=!0:this.router.push({path:"eventDay/"+e.scope.timestamp.date})},onClickWorkweek(e){console.log("onClickWorkweek",e)},onClickHeadDay(e){console.log("onClickHeadDay",e)},onClickHeadWorkweek(e){console.log("onClickHeadWorkweek",e)}}});var f=o(2807),y=o(7716),x=o(6868),_=o(1693),E=o(7410),F=o(6760),W=o(558),q=o(3316),A=o(4189),S=o(3676),T=o(8672),H=o(8582),L=o.n(H);const M=(0,f.A)(b,[["render",v]]),Q=M;L()(b,"components",{QPage:y.A,QBanner:x.A,QBtn:_.A,QTooltip:E.A,QChip:F.A,QDialog:W.A,QCard:q.A,QCardSection:A.A,QSpace:S.A}),L()(b,"directives",{ClosePopup:T.A})}}]);